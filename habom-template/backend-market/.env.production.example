# ==============================================================================
# Backend-Market Environment (.env.production)
# 운영 환경 설정 파일
#
# 사용 방법:
# 1. 이 파일을 복사하여 .env.production 파일로 저장
#    cp .env.production.example .env.production
# 2. 아래 [필수 수정] 항목들을 실제 환경에 맞게 수정
#
# 설정 순서:
# 1. API_BASE_URL = backend-market URL
# 2. Database (MySQL) 정보 입력
# 3. JWT_SECRET 입력
# 4. CORS_ORIGIN = frontend-market URL
# 5. SWAGGER_ENABLED = false (production 사용안함)
# 6. FRONTEND_URL = frontend-market URL (OAuth)
# ==============================================================================

# ------------------------------------------------------------------------------
# Server
# ------------------------------------------------------------------------------
PORT=8081
NODE_ENV=production

# [필수 수정] Backend-Market API가 서비스될 도메인 URL
API_BASE_URL=<YOUR_BACKEND_MARKET_URL>
# 예시: https://api.yourdomain.com


# ------------------------------------------------------------------------------
# Database (MySQL)
# [필수 수정] Docker .env 파일의 MySQL 설정과 일치해야 합니다
# ------------------------------------------------------------------------------
DB_HOST=mysql-market
DB_PORT=3306
DB_USERNAME=<YOUR_MYSQL_USER>
DB_PASSWORD=<YOUR_MYSQL_PASSWORD>
DB_DATABASE=market_db
DB_CHARSET=utf8mb4
DB_POOL_MAX=20
DB_SYNCHRONIZE=true
DB_LOGGING=false
DB_TIMEZONE=Z


# ------------------------------------------------------------------------------
# JWT Authentication
# [필수 수정] 반드시 새로운 시크릿 키를 생성하세요
# 생성 명령어: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
# 주의: backend-pay와 동일한 JWT_SECRET을 사용해야 합니다 (토큰 공유)
# ------------------------------------------------------------------------------
JWT_SECRET=<YOUR_JWT_SECRET_64_BYTES_HEX>
JWT_EXPIRES_IN=1h

# ------------------------------------------------------------------------------
# CORS
# [필수 수정] Frontend 도메인 URL
# ------------------------------------------------------------------------------
CORS_ORIGIN=<YOUR_FRONTEND_URL>
# 예시: https://yourdomain.com


# ------------------------------------------------------------------------------
# Swagger
# [선택 수정] 운영 환경에서는 false 권장
# ------------------------------------------------------------------------------
SWAGGER_ENABLED=false

# ------------------------------------------------------------------------------
# Rate Limiting
# [선택 수정] 필요시 조정
# ------------------------------------------------------------------------------
RATE_LIMIT_TTL=60000
RATE_LIMIT_DEFAULT=60
RATE_LIMIT_STRICT=5
RATE_LIMIT_RELAXED=120

# ------------------------------------------------------------------------------
# Logging
# [선택 수정] 운영 환경: info 또는 warn 권장
# ------------------------------------------------------------------------------
LOG_LEVEL=info

# ------------------------------------------------------------------------------
# Frontend URL
# [필수 수정] OAuth 콜백 등에 사용되는 Frontend URL
# ------------------------------------------------------------------------------
FRONTEND_URL=<YOUR_FRONTEND_URL>
# 예시: https://yourdomain.com

# ------------------------------------------------------------------------------
# OAuth Configuration
# OAuth 설정은 관리자 웹페이지에서 동적으로 관리됩니다.
# DB의 social_login_settings 테이블에서 설정을 읽어옵니다.
# ------------------------------------------------------------------------------

# ------------------------------------------------------------------------------
# Email/SMTP Configuration
# SMTP 설정은 관리자 웹페이지에서 동적으로 관리됩니다.
# DB의 settings 테이블에서 설정을 읽어옵니다.
# ------------------------------------------------------------------------------
